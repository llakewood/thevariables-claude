<!DOCTYPE html>
<html>
<head>
    <title>Archive Diagnostic</title>
</head>
<body>
    <h1>Archive Page Diagnostic</h1>
    <div id="results"></div>
    <script>
        const results = document.getElementById('results');
        
        // Check 1: Protocol
        results.innerHTML += `<p><strong>Protocol:</strong> ${window.location.protocol}</p>`;
        
        if (window.location.protocol === 'file:') {
            results.innerHTML += `<p style="color: red; font-weight: bold;">❌ ERROR: Using file:// protocol</p>`;
            results.innerHTML += `<p>Archive pages require HTTP server due to fetch() CORS restrictions.</p>`;
            results.innerHTML += `<p>Solution: Run <code>npm run serve</code> or <code>python3 -m http.server 8080</code></p>`;
        } else {
            results.innerHTML += `<p style="color: green;">✓ Using HTTP server</p>`;
            
            // Check 2: Try to fetch the data
            results.innerHTML += `<p>Testing fetch...</p>`;
            
            fetch('../data/archive-data.json')
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    results.innerHTML += `<p style="color: green;">✓ Successfully loaded ${data.projects.length} projects</p>`;
                })
                .catch(error => {
                    results.innerHTML += `<p style="color: red;">❌ Fetch failed: ${error.message}</p>`;
                });
        }
    </script>
</body>
</html>
